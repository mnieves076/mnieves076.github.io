<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<script src="http://localhost:8080/socket.io/socket.io.js"></script>
<script>
	var socket;
	var firstconnect = true;

    function connect() {
      if(firstconnect) {
        socket = io.connect("http://localhost:8080/");

        socket.on('message', function(data){ message(data); });
        socket.on('connect', function(){ status_update("Connected to Server"); });
        socket.on('disconnect', function(){ status_update("Disconnected from Server"); });
        socket.on('reconnect', function(){ status_update("Reconnected to Server"); });

        socket.on('reconnecting', function( nextRetry ){ status_update("Reconnecting in " + nextRetry + " seconds"); });
        socket.on('reconnect_failed', function(){ message("Reconnect Failed"); });

        firstconnect = false;

      } else {
        socket.socket.reconnect();
      }
    }

    function disconnect() {
      socket.disconnect();
    }

    function message(data) {
		document.getElementById('message').innerHTML = "Server says: " + data.value;
	}

    function status_update(txt){
      document.getElementById('status').innerHTML = txt;
    }

    function esc(msg){
      return msg.replace(/</g, '&lt;').replace(/>/g, '&gt;');
    }

    function send(msg) {
		 document.getElementById('command').innerHTML = msg;
      	socket.send(msg);    
    };        

</script>

    

    <h1>Socket.io Test</h1>

    <div>Status: <span id="status">Ready</span></div>

	<div><span id="command"></span></div>  
	
    <div><span id="message"></span></div>  

    <button id="connect" onClick='connect()'/>Connect</button>

    <button id="disconnect" onClick='disconnect()'>Disconnect</button><br/>

    <button id="send" onClick="send('GET_TOTAL_PLAYERS')"/>Get Total Players</button><br/>

	<button id="send" onClick="send('GET_TOTAL_PLAYERS_WAITING')"/>Get Total Players Waiting</button><br/>
    
  </body>

</html>
</html>
